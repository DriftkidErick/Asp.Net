@page
@model Week6_labs_ErickC.Pages.Admin.ControlPanelModel
@{
    ViewData["Title"] = "ControlPanel";
}

<h1>ControlPanel</h1>

<div>

    <table class="table table-bordered table-sm table-striped">

        <thead>

            <tr>

                <th>ID</th>
                <th>Brand</th>
                <th>Model</th>
                <th>Category</th>
                <th>Submitted BY</th>
                <th>Reported On</th>
                <th>Active</th>
                <th>Support</th>
                <th>Response</th>
            </tr>

        </thead>

        <tbody>

            @if (Model == null)
            {
                <tr>
                    <td colspan="7" class="text-center">No Model</td>
                </tr>
            }
            else
            {
                @foreach (var p in Model.tix)
                {
                    <tr>

                        <td>@p.Ask_ID</td>
                        <td>@p.Ask_Brand</td>
                        <td>@p.Ask_Model</td>
                        <td>@p.Ask_Category</td>
                        <td>@p.Cust_email</td>
                        <td>@p.Open_Date</td>

                        @{
                            if (p.Ask_Active == true)
                            {
                                <td>Active</td>
                            }
                            else
                            {
                                <td>Closed</td>
                            }
                         }
                
                        <td>@p.Support_email</td>
                        <td style="width:100%";>@p.Support_Notes</td>

                        @*Links to pages*@
                        <td><a asp-page="/Admin/EditTicket" asp-route-id="@p.Ask_ID">Edit</a></td>
                        <td><a asp-page="/Admin/DeleteTicket" asp-route-id="@p.Ask_ID">Delete</a></td>
                    </tr>

                 }
            }

        </tbody>

    </table>

</div>
